1，首先我希望它能读取现有的音频数据集，然后以一种标准化的方式管理。假设这些数据集中有音频文件和标注文件，音频文件为一句话长度的音频，而标注文件则可能是各种形式，比如是一串json，json中包含了许多音频文件的标注信息，可能包含文件名，音频对应字符，音频对应的音素，实际语音的起止时间，发音人，语言种类等。这包含一些问题：不同音频数据集的格式可能不同，我有可能需要每次遇到一个新数据集就编写一种新的录入方式，将这些数据录入到我的管理工具中。并且不同数据集可能包含不同的参数，比如有的数据集标注信息只有一段文字，有的数据集则还有MOS评分，语速，说话人性别等信息，所以我还需要我的管理工具能很方便的扩展新字段。所以需要帮我设计一个数据录入适配层，采用插件形式，为每个数据集编写适配代码，将其转为内部格式。

2，我希望我可以在webui中很容易的管理语音数据，比如通过搜索字段快速搜索符合要求的数据，并包含试听，修改标注信息，查看波形/频谱图等功能。

3，我希望在录入数据集的时候保留原音频，而在导出数据集的时候提供一种格式转换后导出的功能，比如我的原数据可能是mp3格式，48khz采样率，我可以通过配置，让它可以导出wav格式，44.1khz采样率的数据集，并同时可以自定义导出时的标注信息结构。

4，我还希望后续能提供一种调用API标注的功能，比如通过调用whisper接口，让给没有标注信息的语音数据进行标注。因为不同API的调用方式不同，我希望此处在设计时就有比较好的扩展性，方便我实现新的标注方式。不过这个功能会放到以后来实现，请在项目设计上预留实现的空间。

5，任务队列管理，因为导入导出数据集，调用API标注的时候会花比较长的时间，我希望能够以下发任务的形式实现这些功能，比如用户选中了一些数据，要求调用接口给这些数据进行标注，则可以添加标注任务，系统会在后台对这些数据进行标注，不影响用户使用其他功能。同时用户可以方便的管理正在进行的任务，可以启动，暂停，查看历史任务等。

6，我希望使用flask编写后台，数据库方面暂时使用sqlalchemy和sqlite，在未来数据量大了之后可能会迁移到MySQL或PostgreSQL

7，前端我想使用VUE进行前端页面开发，并且使用VITE创建项目

8，未来需要API让外部系统进行访问，先做好设计上的预留，这个的开发优先级会比较靠后

9，需要完善的日志记录，便于及时发现和排查系统问题

10，需要用户身份验证、权限控制

数据导入与标准化的细节：

我的设想是使用json来存储数据集的各种标注信息。这样便于日后的扩展，并再加一个属性管理表和对应页面来管理json中的key值。属性管理表至少包含以下信息：属性id，属性key值，属性名，属性介绍，属性数据类型，属性标签，属性标签暂时预留。比如我的数据集中包含文本信息和说话人信息，我就可以在属性管理表中定义3行：key值：file_path、属性名：文件位置、属性介绍：语音文件位置、属性数据类型：str；key值：text、属性名：文本、属性介绍：来自原数据集文本标注、属性数据类型：str；key值：speaker、属性名：说话人、属性介绍：来自原数据集标注、属性数据类型：str。然后在实际存储的表中以这种形式记录信息：{"file_path":"xxx/1.wav","text":"标注文本1","speaker":"说话人1"}。之后我又有了另一个数据集，这里面没有文本标注，但是我实现了调用接口标注数据的功能，我就可以在属性管理表中新建一行：key值：whisper_text属性名：whisper标注文本，属性介绍：来自whisper标注的文本、属性数据类型：str。然后将标注得到的文本放在这个新的字段里。实际存储的表中类似这种形式：{"file_path":"xxx/2.wav","whisper_text":"标注文本2"}。

关于数据导入，我希望通过abc模块定义一个插件接口，这个插件接口需要插件类来实现，包含一些抽象方法：获取音频文件当前路径，将其复制到数据及指定的管理路径下，并获取新路径地址以便于后续和标注信息相对应。读取标注信息，和现有标注信息比对，如果需要则提供一份新增属性信息，后续程序可以依据这个表在属性管理表中新增属性。最后输出一个格式化后的标注信息，然后由抽象类中的具体方法来读取格式化后的接口信息，并且进行校验看是否符合标注的数据类型，然后入库。这些插件会放在指定目录下通过importlib动态加载。最后

关于webUI：我希望使用VUE，用VITE创建项目，使用element-plus组件库。我希望页面的左侧固定为一排菜单，右侧为页面展示区域，点击左侧菜单可以跳到对应的页面。我目前需要以下几个页面：

1.数据集管理页面：系统分为数据集-数据两个维度，也就是说用户可以自己定义多个数据集然后分别导入数据，让数据归属于不同的数据集以便于管理。页面应包括对数据集的增删改查功能，用户可以自定义数据集名和数据集介绍等信息。用户创建完数据集后页面上应该有一个展示列表可以查看已有数据集，点击详情可查看数据集介绍，包含数据条数等信息。可以点击进入对应的数据集数据查询页面，用户可以在这里同时对数据用户也可以进行增删改查等操作。

2.数据集导入页面：系统还可以动态加载并识别数据集导入插件，然后在页面上用户可以选择原始数据集文件、导入插件、要导入的目标数据集名（由数据集管理页面创建的数据集），创建导入任务。任务完成后进入数据集管理页面可以看到导入成功的数据。

3.数据查询页面：这个页面中用户可以搜索并展示数据，页面上方为搜索项选择区域，包含一些搜索条件：

数据集选择下拉框，用户可以在这里选择数据集，当数据集管理页面创建成功数据集后，这里就会多出一条数据集名以供选择。

标注信息过滤：因为我们系统的标注信息是动态的，所以我们必须通过读取属性管理表和聚合属性表（下面会提到）来获取当前有哪些标注信息，然后生成页面的标注信息过滤模块，因为我们有属性数据类型这一字段，所以我们会对不同类型的数据类型生成不同的搜索项。比如str类型就是提供一个输入框，用户可以过滤指定的字符串进行模糊搜索，如果是数值类型就提供一个输入框，可以填写起止范围，类似1.2~5.1这样的输入，然后程序会解析，过滤这个范围内的数值。

搜索条件的最后有三个按钮：查询、重置、导出，查询按钮点击后可应用上面的查询条件，发起查询请求，在下面的结果展示区域展示查询结果，重置按钮点击后页面会恢复到初次进入时的状态。导出按钮点击后会进入导出弹窗，在导出弹窗中我可以选择要导出哪些属性，然后过滤条件会复用刚才的搜索页面的过滤条件，并且还能选择要导出的音频文件格式和其他音频属性，最后系统会创建一个导出任务，放在后台执行。其中音频相关转换会使用ffmpeg-python

页面下方为查询结果展示区域，包括一个列表和分页模块，用户可以在这里查看符合条件的搜索结果，对数据进行修改，试听等操作。

4.属性管理页面：用户可以在这里控制属性管理表，可以添加或删除，修改属性信息。

5.属性聚合管理：用户可以在这里将多个属性进行聚合，并设置优先级。但是必须是相同数据类型的属性才能聚合。比如属性管理表中共有三种属性：数据集自带标注、whisper标注、讯飞识别标注。用户可以将这三种属性新建一个聚合属性：标注，然后设置优先级为数据集自带标注>whisper标注>讯飞识别标注，也就是说如果一条数据中有数据集自带标注，则聚合属性的值取这个字段，如果没有则取whisper标注的值，如果也没有，则取讯飞识别标注的值，以此类推。要注意的是我希望这里的聚合属性拥有和常规属性相同的能力，比如在数据查询页面也会呈现聚合属性的过滤条件，查询结果展示表格中也会出现聚合属性相关的列。

6.任务管理页面：包含几个子页面，分别展示导入任务、导出任务的任务进度和任务详情，通过Celery + SQLite 处理任务队列。

7.登录页面：我希望我的系统需要登录后才能访问，并且提供用户管理功能。

其他：

前端与后端集成：使用RESTful API进行前后端数据交互，确保接口的清晰性与规范性，方便后期维护和拓展。

用户管理与权限控制：角色管理：定义不同的角色（如管理员、普通用户等），并设置不同的访问权限。对于数据集的导入、导出、修改、删除等操作设置权限。

使用Flask-Login进行用户身份验证，Flask-Principal进行权限控制。

日志记录：使用Flask-Logging来记录系统的运行日志，并通过日志级别（如INFO、ERROR、DEBUG等）来控制日志的详细程度。
